<!--
fcs/elevon-1L-pos-deg
fcs/elevon-1R-pos-deg
fcs/elevon-2L-pos-deg
fcs/elevon-2R-pos-deg

fcs/slat-1L-pos-deg
fcs/slat-1R-pos-deg
fcs/slat-2L-pos-deg
fcs/slat-2R-pos-deg

fcs/airbrake-upper
fcs/airbrake-lower
-->
<system name="Mirage2000 Digital flight control system">
    <property value="0">fcs/null</property>
    <!-- aileron: +/- 5deg : +/- 33 deg/sec -->
    <channel name="Roll">
        <summer name="Roll Input">
            <input>fcs/aileron-cmd-norm</input>
            <input>fcs/roll-trim-cmd-norm</input>
            <!--<input>fcs/roll-trim-autopilot-norm</input>-->
            <clipto>
                <min> -1 </min>
                <max>  1 </max>
            </clipto>
            <output>fcs/roll-delta-dmd</output>
        </summer>

        <fcs_function>
            <description>Roll Rate rad/s</description>
            <function>
                <table>
                    <independentVar lookup="row">velocities/vc-kts</independentVar>
                    <independentVar lookup="column">aero/alpha-deg</independentVar>
                    <tableData>
                        0	20
                        0	0.50	0.40
                        200	1.00	0.80
                        310	3.00	2.40
                        415	3.00	2.40
                        520	3.00	2.40
                        620	3.00	2.40
                        740	3.00	2.40
                        820	3.00	2.40
                        900	3.00	2.40
                    </tableData>
                </table>
            </function>
            <output>fcs/roll-rate-rads</output>
        </fcs_function >

        <switch name="fcs/roll-demand-rad-lv">
            <default value="fcs/roll-demand-rad"/>
        </switch>
        <fcs_function>
            <function>
                <sum>
                    <property>fcs/roll-demand-rad-lv</property>
                    <product>
                        <property>fcs/roll-rate-rads</property>
                        <property>simulation/channel-dt</property>
                        <property>fcs/roll-delta-dmd</property>
                    </product>
                </sum>
            </function>
            <output>fcs/roll-demand-rad</output>
        </fcs_function>

        <fcs_function>
            <function>
                <product>
                    <property>fcs/roll-demand-rad</property>
                    <v>57.2957</v>
                </product>
            </function>
            <output>fcs/roll-demand-deg</output>
        </fcs_function>


    </channel>

    <channel name="pitch">

    </channel>

    <channel name="differential control">
        <fcs_function name="fcs/differential-roll-demand-deg">
            <function>
                <product>
                    <property>fcs/roll-demand-deg</property>
                    <table>
                        <independentVar lookup="row">fcs/elevator-pos-deg</independentVar>
                        <independentVar lookup="column">velocities/vc-kts</independentVar>
                        <tableData>
                            635.0	664.3	668.2	714.8	741.3	768.0	794.7
                            -24	0.16	0.16	0.16	0.16	0.16	0.16	0.16
                            -23	0.16	0.16	0.16	0.16	0.16	0.16	0.16
                            -22	0.16	0.16	0.16	0.16	0.16	0.15	0.16
                            -21	0.16	0.16	0.16	0.16	0.16	0.15	0.16
                            -20	0.16	0.16	0.16	0.16	0.16	0.15	0.16
                            -19	0.16	0.16	0.16	0.16	0.16	0.15	0.16
                            -18	0.19	0.19	0.20	0.20	0.19	0.19	0.19
                            -17	0.29	0.30	0.30	0.30	0.30	0.29	0.24
                            -16	0.39	0.40	0.40	0.40	0.40	0.38	0.24
                            -15	0.50	0.50	0.51	0.50	0.50	0.38	0.24
                            -14	0.60	0.60	0.61	0.61	0.50	0.38	0.24
                            -13	0.70	0.70	0.71	0.63	0.50	0.38	0.24
                            -12	0.80	0.81	0.75	0.63	0.50	0.38	0.24
                            -11	0.91	0.87	0.75	0.63	0.50	0.38	0.25
                            -10	1.00	0.87	0.75	0.63	0.50	0.38	0.25
                            -9	1.00	0.87	0.75	0.63	0.50	0.38	0.25
                            -8	1.00	0.87	0.75	0.63	0.50	0.38	0.25
                            -7	1.00	0.88	0.75	0.63	0.50	0.38	0.25
                            -6	1.00	0.88	0.75	0.63	0.50	0.38	0.25
                            -5	1.00	0.88	0.75	0.63	0.50	0.38	0.25
                            -4	0.90	0.88	0.75	0.63	0.50	0.38	0.25
                            -3	0.79	0.80	0.75	0.63	0.50	0.38	0.25
                            -2	0.69	0.69	0.69	0.63	0.50	0.38	0.25
                            -1	0.58	0.59	0.59	0.59	0.50	0.38	0.25
                            0	0.47	0.49	0.48	0.49	0.48	0.38	0.25
                            1	0.37	0.39	0.38	0.40	0.38	0.38	0.25
                            2	0.26	0.28	0.27	0.30	0.28	0.28	0.25
                            3	0.25	0.25	0.24	0.25	0.25	0.24	0.25
                            4	0.25	0.25	0.24	0.25	0.24	0.24	0.25
                            5	0.25	0.25	0.24	0.25	0.24	0.24	0.25
                            6	0.24	0.25	0.24	0.25	0.24	0.24	0.25
                            7	0.24	0.25	0.24	0.25	0.24	0.24	0.25
                            8	0.24	0.25	0.24	0.25	0.24	0.24	0.25
                            9	0.24	0.25	0.24	0.25	0.24	0.24	0.25
                            10	0.24	0.25	0.24	0.25	0.24	0.24	0.25
                            11	0.24	0.25	0.24	0.25	0.24	0.24	0.25
                            12	0.24	0.24	0.24	0.24	0.24	0.24	0.25
                            13	0.24	0.24	0.24	0.24	0.24	0.24	0.25
                            14	0.24	0.24	0.24	0.24	0.24	0.24	0.25
                            15	0.24	0.24	0.24	0.24	0.24	0.24	0.24
                            16	0.24	0.24	0.24	0.24	0.24	0.24	0.24
                        </tableData>
                    </table>
                </product>
            </function>
        </fcs_function>

        <aerosurface_scale name="fcs/differential-elevator-pos-deg">
            <!--<input>fcs/differential-elevator-pos-norm</input>-->
            <input>fcs/null</input>
            <domain>
                <min>  -1 </min>
                <max>   1 </max>
            </domain>
            <range>
                <min> -6.66667 </min>
                <max>  6.66667 </max>
            </range>
        </aerosurface_scale>


    </channel>
    <channel name="Surfaces">
     
        <aerosurface_scale name="elevon 1L pos deg">
            <input>fcs/elevator-cmd-norm</input>
            <range>
                <min> -40 </min>
                <max>  40 </max>
            </range>
            <output>fcs/elevon-1L-pos-deg</output>
        </aerosurface_scale> <aerosurface_scale name="elevon 2L pos deg">
            <input>fcs/elevator-cmd-norm</input>
            <range>
                <min> -40 </min>
                <max>  40 </max>
            </range>
            <output>fcs/elevon-2L-pos-deg</output>
        </aerosurface_scale> <aerosurface_scale name="elevon 1R pos deg">
            <input>fcs/elevator-cmd-norm</input>
            <range>
                <min> -40 </min>
                <max>  40 </max>
            </range>
            <output>fcs/elevon-1R-pos-deg</output>
        </aerosurface_scale> 
        <aerosurface_scale name="elevon 2R pos deg">
            <input>fcs/elevator-cmd-norm</input>
            <range>
                <min> -40 </min>
                <max>  40 </max>
            </range>
            <output>fcs/elevon-2R-pos-deg</output>
        </aerosurface_scale>


        <aerosurface_scale name="slat 1L pos deg">
            <input>fcs/null</input>
            <range>
                <min> -0.022807 </min>
                <max>  0.022807 </max>
            </range>
            <output>fcs/slat-1L-pos-deg</output>
        </aerosurface_scale>
        <aerosurface_scale name="slat 2L pos deg">
            <input>fcs/null</input>
            <range>
                <min> -0.022807 </min>
                <max>  0.022807 </max>
            </range>
            <output>fcs/slat-2L-pos-deg</output>
        </aerosurface_scale>
        <aerosurface_scale name="slat 1R pos deg">
            <input>fcs/null</input>
            <range>
                <min> -0.022807 </min>
                <max>  0.022807 </max>
            </range>
            <output>fcs/slat-1R-pos-deg</output>
        </aerosurface_scale>
        <aerosurface_scale name="slat 2R pos deg">
            <input>fcs/null</input>
            <range>
                <min> -0.022807 </min>
                <max>  0.022807 </max>
            </range>
            <output>fcs/slat-2R-pos-deg</output>
        </aerosurface_scale>
        <aerosurface_scale name="airbrake upper">
            <input>fcs/null</input>
            <range>
                <min>  0</min>
                <max>  50</max>
            </range>
            <output>fcs/airbrake-upper</output>
        </aerosurface_scale>
        
        

        <aerosurface_scale name="airbrake lower">
        <input>fcs/null</input>
        <range>
            <min>  0</min>
            <max>  50</max>
        </range>
        <output>fcs/airbrake-lower</output>
    </aerosurface_scale>
    </channel>
</system>